
[Unit]
Description=Flask App (Gunicorn)
After=network.target postgresql.service
Requires=postgresql.service

[Service]
User=ec2-user
WorkingDirectory=/home/ec2-user/flask-app
ExecStart=/usr/bin/python3 -m gunicorn --workers 3 --bind 127.0.0.1:5000 wsgi:app
Environment="DB_HOST=localhost"
Environment="DB_NAME={{ db_name }}"
Environment="DB_USER={{ db_user }}"
Environment="DB_PASS={{ db_password }}"
Restart=always

[Install]
WantedBy=multi-user.target


